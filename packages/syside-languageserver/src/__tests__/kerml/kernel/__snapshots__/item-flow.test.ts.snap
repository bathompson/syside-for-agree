// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`explicit declaration with name only is treated as typing 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "fuelTank",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "engine",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "item": {
    "$type": "FeatureMembership",
    "elements": [],
    "target": {
      "$type": "ItemFeature",
      "children": [],
      "heritage": [
        {
          "$type": "FeatureTyping",
          "elements": [],
          "targetRef": {
            "$type": "TypeReference",
            "parts": [
              {
                "error": undefined,
                "ref": {
                  "$type": "Class",
                  "children": [
                    {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "Class",
                        "children": [],
                        "declaredName": "SubFuel",
                        "heritage": [],
                        "isSufficient": false,
                        "prefixes": [],
                        "typeRelationships": [],
                      },
                    },
                  ],
                  "declaredName": "Fuel",
                  "heritage": [],
                  "isSufficient": false,
                  "prefixes": [],
                  "typeRelationships": [],
                },
              },
            ],
          },
        },
      ],
      "isNonunique": false,
      "isOrdered": false,
      "isSufficient": false,
      "prefixes": [],
      "typeRelationships": [],
    },
  },
  "prefixes": [],
  "typeRelationships": [],
}
`;

exports[`explicit declaration with qualified name only is treated as typing 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "fuelTank",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "engine",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "item": {
    "$type": "FeatureMembership",
    "elements": [],
    "target": {
      "$type": "ItemFeature",
      "children": [],
      "heritage": [
        {
          "$type": "FeatureTyping",
          "elements": [],
          "targetRef": {
            "$type": "TypeReference",
            "parts": [
              {
                "error": undefined,
                "ref": {
                  "$type": "Class",
                  "children": [
                    {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "Class",
                        "children": [],
                        "declaredName": "SubFuel",
                        "heritage": [],
                        "isSufficient": false,
                        "prefixes": [],
                        "typeRelationships": [],
                      },
                    },
                  ],
                  "declaredName": "Fuel",
                  "heritage": [],
                  "isSufficient": false,
                  "prefixes": [],
                  "typeRelationships": [],
                },
              },
              {
                "error": undefined,
                "ref": {
                  "$type": "Class",
                  "children": [],
                  "declaredName": "SubFuel",
                  "heritage": [],
                  "isSufficient": false,
                  "prefixes": [],
                  "typeRelationships": [],
                },
              },
            ],
          },
        },
      ],
      "isNonunique": false,
      "isOrdered": false,
      "isSufficient": false,
      "prefixes": [],
      "typeRelationships": [],
    },
  },
  "prefixes": [],
  "typeRelationships": [],
}
`;

exports[`flow declaration can also include an explicit declaration of the type 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "fuelTank",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "engine",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "item": {
    "$type": "FeatureMembership",
    "elements": [],
    "target": {
      "$type": "ItemFeature",
      "children": [],
      "declaredName": "fuelFlow",
      "heritage": [
        {
          "$type": "FeatureTyping",
          "elements": [],
          "targetRef": {
            "$type": "TypeReference",
            "parts": [
              {
                "error": undefined,
                "ref": {
                  "$type": "Class",
                  "children": [
                    {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "Class",
                        "children": [],
                        "declaredName": "SubFuel",
                        "heritage": [],
                        "isSufficient": false,
                        "prefixes": [],
                        "typeRelationships": [],
                      },
                    },
                  ],
                  "declaredName": "Fuel",
                  "heritage": [],
                  "isSufficient": false,
                  "prefixes": [],
                  "typeRelationships": [],
                },
              },
            ],
          },
        },
      ],
      "isNonunique": false,
      "isOrdered": false,
      "isSufficient": false,
      "prefixes": [],
      "typeRelationships": [],
    },
  },
  "prefixes": [],
  "typeRelationships": [],
}
`;

exports[`flow identification can be omitted 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "fuelTank",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "engine",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "prefixes": [],
  "typeRelationships": [],
}
`;

exports[`flow source and output targets can be specified using feature chains 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "declaredName": "fuelFlow",
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "fuelTank",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [
          {
            "$type": "ReferenceSubsetting",
            "elements": [],
            "targetRef": {
              "$type": "FeatureReference",
              "parts": [
                {
                  "error": undefined,
                  "ref": {
                    "$type": "Feature",
                    "children": [
                      {
                        "$type": "FeatureMembership",
                        "elements": [],
                        "target": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [
                                        {
                                          "$type": "OwningMembership",
                                          "elements": [],
                                          "target": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "SubFuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                    "declaredName": "engine",
                    "heritage": [],
                    "isComposite": "composite",
                    "isNonunique": false,
                    "isOrdered": false,
                    "isSufficient": false,
                    "multiplicity": {
                      "$type": "OwningMembership",
                      "elements": [],
                      "target": {
                        "$type": "MultiplicityRange",
                        "children": [],
                        "heritage": [],
                        "isNonunique": false,
                        "isOrdered": false,
                        "isSufficient": false,
                        "prefixes": [],
                        "range": {
                          "$type": "OwningMembership",
                          "elements": [],
                          "target": {
                            "$type": "LiteralNumber",
                            "children": [],
                            "heritage": [],
                            "isNonunique": false,
                            "isOrdered": false,
                            "isSufficient": false,
                            "literal": 1,
                            "prefixes": [],
                            "typeRelationships": [],
                          },
                        },
                        "typeRelationships": [],
                      },
                    },
                    "prefixes": [],
                    "typeRelationships": [],
                  },
                },
              ],
            },
          },
        ],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "prefixes": [],
  "typeRelationships": [],
}
`;

exports[`named item flows are parsed 1`] = `
{
  "$type": "ItemFlow",
  "children": [],
  "declaredName": "fuelFlow",
  "elements": [],
  "ends": [
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [
                            {
                              "$type": "FeatureMembership",
                              "elements": [],
                              "target": {
                                "$type": "Feature",
                                "children": [],
                                "declaredName": "fuelOut",
                                "direction": "out",
                                "heritage": [
                                  {
                                    "$type": "FeatureTyping",
                                    "elements": [],
                                    "targetRef": {
                                      "$type": "TypeReference",
                                      "parts": [
                                        {
                                          "error": undefined,
                                          "ref": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "Fuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                    },
                                  },
                                ],
                                "isNonunique": false,
                                "isOrdered": false,
                                "isSufficient": false,
                                "multiplicity": {
                                  "$type": "OwningMembership",
                                  "elements": [],
                                  "target": {
                                    "$type": "MultiplicityRange",
                                    "children": [],
                                    "heritage": [],
                                    "isNonunique": false,
                                    "isOrdered": false,
                                    "isSufficient": false,
                                    "prefixes": [],
                                    "range": {
                                      "$type": "OwningMembership",
                                      "elements": [],
                                      "target": {
                                        "$type": "LiteralNumber",
                                        "children": [],
                                        "heritage": [],
                                        "isNonunique": false,
                                        "isOrdered": false,
                                        "isSufficient": false,
                                        "literal": 1,
                                        "prefixes": [],
                                        "typeRelationships": [],
                                      },
                                    },
                                    "typeRelationships": [],
                                  },
                                },
                                "prefixes": [],
                                "typeRelationships": [],
                              },
                            },
                          ],
                          "declaredName": "fuelTank",
                          "heritage": [],
                          "isComposite": "composite",
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelOut",
                          "direction": "out",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
    {
      "$type": "EndFeatureMembership",
      "elements": [],
      "target": {
        "$type": "ItemFlowEnd",
        "children": [
          {
            "$type": "FeatureMembership",
            "elements": [],
            "target": {
              "$type": "Feature",
              "children": [],
              "heritage": [
                {
                  "$type": "Redefinition",
                  "elements": [],
                  "targetRef": {
                    "$type": "FeatureReference",
                    "parts": [
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [
                            {
                              "$type": "FeatureMembership",
                              "elements": [],
                              "target": {
                                "$type": "Feature",
                                "children": [],
                                "declaredName": "fuelIn",
                                "direction": "in",
                                "heritage": [
                                  {
                                    "$type": "FeatureTyping",
                                    "elements": [],
                                    "targetRef": {
                                      "$type": "TypeReference",
                                      "parts": [
                                        {
                                          "error": undefined,
                                          "ref": {
                                            "$type": "Class",
                                            "children": [],
                                            "declaredName": "Fuel",
                                            "heritage": [],
                                            "isSufficient": false,
                                            "prefixes": [],
                                            "typeRelationships": [],
                                          },
                                        },
                                      ],
                                    },
                                  },
                                ],
                                "isNonunique": false,
                                "isOrdered": false,
                                "isSufficient": false,
                                "multiplicity": {
                                  "$type": "OwningMembership",
                                  "elements": [],
                                  "target": {
                                    "$type": "MultiplicityRange",
                                    "children": [],
                                    "heritage": [],
                                    "isNonunique": false,
                                    "isOrdered": false,
                                    "isSufficient": false,
                                    "prefixes": [],
                                    "range": {
                                      "$type": "OwningMembership",
                                      "elements": [],
                                      "target": {
                                        "$type": "LiteralNumber",
                                        "children": [],
                                        "heritage": [],
                                        "isNonunique": false,
                                        "isOrdered": false,
                                        "isSufficient": false,
                                        "literal": 1,
                                        "prefixes": [],
                                        "typeRelationships": [],
                                      },
                                    },
                                    "typeRelationships": [],
                                  },
                                },
                                "prefixes": [],
                                "typeRelationships": [],
                              },
                            },
                          ],
                          "declaredName": "engine",
                          "heritage": [],
                          "isComposite": "composite",
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                      {
                        "error": undefined,
                        "ref": {
                          "$type": "Feature",
                          "children": [],
                          "declaredName": "fuelIn",
                          "direction": "in",
                          "heritage": [
                            {
                              "$type": "FeatureTyping",
                              "elements": [],
                              "targetRef": {
                                "$type": "TypeReference",
                                "parts": [
                                  {
                                    "error": undefined,
                                    "ref": {
                                      "$type": "Class",
                                      "children": [],
                                      "declaredName": "Fuel",
                                      "heritage": [],
                                      "isSufficient": false,
                                      "prefixes": [],
                                      "typeRelationships": [],
                                    },
                                  },
                                ],
                              },
                            },
                          ],
                          "isNonunique": false,
                          "isOrdered": false,
                          "isSufficient": false,
                          "multiplicity": {
                            "$type": "OwningMembership",
                            "elements": [],
                            "target": {
                              "$type": "MultiplicityRange",
                              "children": [],
                              "heritage": [],
                              "isNonunique": false,
                              "isOrdered": false,
                              "isSufficient": false,
                              "prefixes": [],
                              "range": {
                                "$type": "OwningMembership",
                                "elements": [],
                                "target": {
                                  "$type": "LiteralNumber",
                                  "children": [],
                                  "heritage": [],
                                  "isNonunique": false,
                                  "isOrdered": false,
                                  "isSufficient": false,
                                  "literal": 1,
                                  "prefixes": [],
                                  "typeRelationships": [],
                                },
                              },
                              "typeRelationships": [],
                            },
                          },
                          "prefixes": [],
                          "typeRelationships": [],
                        },
                      },
                    ],
                  },
                },
              ],
              "isNonunique": false,
              "isOrdered": false,
              "isSufficient": false,
              "prefixes": [],
              "typeRelationships": [],
            },
          },
        ],
        "heritage": [],
        "isNonunique": false,
        "isOrdered": false,
        "isSufficient": false,
        "prefixes": [],
        "typeRelationships": [],
      },
    },
  ],
  "heritage": [],
  "isNonunique": false,
  "isOrdered": false,
  "isSufficient": false,
  "prefixes": [],
  "typeRelationships": [],
}
`;
